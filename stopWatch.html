<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stop Watch</title>
  <link rel="stylesheet" href="../online_shopping/fontawesome/css/all.min.css">
  <style>
    input[type='number']{
      border: 0;
      width: 100px;
      padding: 5px;
      text-align: center;
    }
    div>p{
      text-align: center;
    }
  </style>
</head>
<body>
  <div style="display: flex;">
    <div>
      <p>Days</p>
      <input type="number" id="days" placeholder="00"/><span>:</span>
    </div>
    <div>
      <p>Hours</p>
      <input type="number" id="hours" placeholder="00" max="23" min="0"/><span>:</span>
    </div>
    <div>
      <p>Minutes</p>
      <input type="number" id="minutes" placeholder="00" max="59" min="0"/><span>:</span>
    </div>
    <div>
      <p>Seconds</p>
      <input type="number" id="seconds" placeholder="00" max="59" min="0"/>
    </div>
  </div>

  <div style="margin: 30px;">
    <button onclick="startTimer()" id="startTimer">Start Timer</button>
  </div>

  <div id="clock"></div>

  <div style="box-shadow:0 0 5px rgba(0,0,0,0.9);display:inline;border-radius:3px;">
    <input type="password" id="password" style="border: 0;outline:none;padding:5px;"/>
    <span><i class="fa fa-eye" onclick="show(this)"></i></span>
  </div>

  <script>
    var clicks = 0;
    function show(element){
      ++clicks;
      if (clicks % 2 == 1) {
        element.classList.remove("fa-eye");
        element.classList.add("fa-eye-slash");
        document.querySelector("#password").type = "text";
      }else{
        element.classList.remove("fa-eye-slash");
        element.classList.add("fa-eye");
        document.querySelector("#password").type = "password";
      }
      
    }
    
    function setCookie(name,value,expDay) {
      let ctime = new Date();
      ctime.setTime(ctime.getTime() + expDay*24*60*60*1000);
      let cstring = name + "=" + value + "; expires=" + ctime.toUTCString();
      document.cookie = cstring;
      console.log(cstring);
    }
    function getCookie(name) {
      let cookies = document.cookie;
      let cstring = cookies.split(";");
      for (let index = 0; index < cstring.length; index++) {
        const element = cstring[index];
        if (element.indexOf(name) != -1) {
          return element.substring(name.length+1,element.length);
        }
      }
      return "";
    }

    setCookie("username","maurice",5); 
    console.log(getCookie(name));
    

    function delCookie(name) {
      let ctime = new Date();
      ctime.setTime(ctime.getMonth() -1);
      let cstring = name + "=" +";expires=" + ctime.toUTCString();
      document.cookie = cstring;
    //  console.log(cstring);
    }
   console.log(delCookie(name));
    let days;
    let hours;
    let minutes;
    let seconds;
    const clock = document.querySelector("#clock");

    function startTimer() {
        seconds = document.querySelector("#seconds").value.trim()!=""?document.querySelector("#seconds").value:0;
        minutes = document.querySelector("#minutes").value.trim()!=""?document.querySelector("#minutes").value:0;
        hours = document.querySelector("#hours").value.trim()!=""?document.querySelector("#hours").value:0;
        days = document.querySelector("#days").value.trim()!=""?document.querySelector("#days").value:0;
        
        const ctime = new Date();  
        const time = ctime.getTime() + seconds*1000 + minutes*60*1000 + hours*60*60*1000 + days*24*60*60*1000;
        const interval = setInterval(
          ()=>{
            var timeLeft = calRemainingTime(time)
            if (timeLeft.remTime < 0) {
              clearInterval(interval);
            }else{
              timeLeft.remSeconds = timeLeft.remSeconds.toString().length>1?timeLeft.remSeconds:"0"+timeLeft.remSeconds;
              timeLeft.remMinutes = timeLeft.remMinutes.toString().length>1?timeLeft.remMinutes:"0"+timeLeft.remMinutes;
              timeLeft.remHours = timeLeft.remHours.toString().length>1?timeLeft.remHours:"0"+timeLeft.remHours;
              days = days.toString().length>1?days:"0"+days;
              clock.innerHTML = timeLeft.remDays + " : " + timeLeft.remHours + " : " + 
                timeLeft.remMinutes + " : " + timeLeft.remSeconds;
            }
          },
          1000);

        //const interval = setInterval(getRemainingTime,1000);
    }

    function calRemainingTime(time){
      const currentTime = new Date().getTime();
      const remTime = time - currentTime;
      const remSeconds = Math.floor(remTime/(1000)%60);
      const remMinutes = Math.floor(remTime/(1000*60)%60);
      const remHours = Math.floor(remTime/(1000*60*60)%24);
      const remDays = Math.floor(remTime/(1000*60*60*24));
      return{remTime,remDays,remHours,remMinutes,remSeconds};

    }

    function getRemainingTime() {
      if (seconds > 0) {
        seconds--;
      }else if (seconds <= 0 && minutes > 0){
        seconds = 59;
        minutes--;
      }else if (seconds <= 0 && minutes <= 0 && hours > 0) {
        seconds = 59;
        minutes = 59;
        hours--;      
      }else if (seconds <= 0  && minutes <= 0 && hours <= 0 && days > 0) {
        seconds = 59;
        minutes = 59;
        hours = 23;
        days--;
      }else{
        
      }

      seconds = seconds.toString().length>1?seconds:"0"+seconds;
      minutes = minutes.toString().length>1?minutes:"0"+minutes;
      hours = hours.toString().length>1?hours:"0"+hours;
      days = days.toString().length>1?days:"0"+days;

      clock.innerHTML = days + " : " + hours + " : " + minutes + " : " + seconds;
      //return{days,hours,minutes,seconds};
    }    
  </script> 
</body>
</html>