<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snake Game</title>
  <style>
    body{
      background-color: #375;
    }
    #canvas{
      display: block;
      margin: 5px auto;
      border: 10px solid #657;
    }
  </style>
</head>
<body>
  <canvas id="canvas" width="450" height="450"></canvas>
  
  <script src="../Bootstrap/bootstrap-4.6.0-dist/js/jquery-3.51.min.js"></script>
  <script>
    $(document).ready(function() {
      var snake,finished=false,food,w,h,cw,ctx,d,canvas,score,level;
      canvas = $("#canvas")[0];
      ctx = canvas.getContext("2d");
      h = $("#canvas").height();
      w = $("#canvas").width(); 
      cw = 10;
  
      function init() {
        d = "right";
        createSnake();
        createFood();
        score = 0;
        level = 1;
  
        if (typeof gameLoop != "undefined") {
            clearInterval(gameLoop);
        }
        gameLoop = setInterval(paint,100);
      }
      init();
  
      function createFood() {
        food = {
          x:Math.round(Math.random()*(w-cw)/cw),
          y:Math.round(Math.random()*(h-cw)/cw)
        }
      }
  
      function createSnake() {
        var len = 5;
        snake = [];
        for (let i = len-1; i > 0; i--) {
          snake.push({x:i,y:0});
        }
      }
  
      function paint() {
        ctx.fillStyle = "white";
        ctx.fillRect(0,0,w,h);
        ctx.strokeStyle = "black";
        ctx.fillRect(0,0,w,h);
  
        //movement clause
        var nx = snake[0].x;
        var ny = snake[0].y;
  
        if (d == "right") {
          nx++;
        }else if(d == "left"){
          nx--;
        }else if(d == "up"){
          ny--;
        }else if(d == "down"){
          ny++;
        }
  
        //game over clause
        if (nx == -1 || nx == w/cw || ny == -1 || ny == h/cw || checkCollision(nx,ny,snake)) {
          //alert("game over");
          init();
          return;
        }
  
        //eating clause
        if (nx == food.x && ny == food.y) {
          var tail = {x:nx, y:ny};
          score++;
          createFood();
        }else{
          var tail = snake.pop();
          tail.x = nx;
          tail.y = ny;
        }
  
        snake.unshift(tail);
  
        //color snake
        for (let i = 0; i < snake.length; i++) {
          let c = snake[i];
          paintCell(c.x, c.y, "blue");        
        }
  
        //color food
        paintCell(food.x, food.y, "red");
  
        //color text
        var scoreText = "Score " + score;
        var levelText = "Level " + level;
        ctx.fillText(scoreText, 5, h-5);
        ctx.fillText(levelText, 60, h-5);
      }
  
      function paintCell(x, y, color) {
        ctx.fillStyle = color;
        ctx.fillRect(x*cw, y*cw, cw,cw);
        ctx.strokeStyle = "white";
        ctx.fillRect(x*cw, y*cw, cw,cw);
      }
  
      function checkCollision(x, y, snake) {
        for (let i = 0; i < snake.length; i++) {
          if (snake[i].x == x && snake[i].y == y) {
            return true;
          }
        }
        return false;
      }
  
      $(document).keydown(function(e) {
        var key = e.which;
        if (key == "37" && d != "right") {
          d = "left";
        }else if(key == "38" && d != "down"){
          d = "up";
        }else if(key == "39" && d != "left"){
          d = "right";
        }else if(key == "40" && d != "up"){
          d = "down";
        }
      });
    });
  </script>
</body>
</html>